/**
 * Represents a buffer that contains Java source code.
 *
 * @author Matias Mirabelli <lumen.night@gmail.com>
 * @since 0.0.1
 */
make.JavaFileBuffer = function (buffer) {

  /** Access to Node's Path API. Cannot be null.
   */
  var path = require("path");

  var classNameMatcher = /^(([a-z0-9])+.)+[A-Z0-9]([A-Za-z0-9])+$/;

  if (!classNameMatcher.test(buffer.name)) {
    throw new Error("Invalid class name: " + buffer.name);
  }

  console.log("CREATING JavaFileBuffer");
  return Mixin(this, Mixin(new make.FileBuffer(buffer), {

    /**
     * Builds the full file name for this buffer using the specified source code
     * path and buffer's name.
     * <p>
     * Java buffers are named using the full classpath and class name. e.g:
     * com.test.app.MyClass.
     * </p>
     */
    getFile : function(sourcePath) {
      console.log("TEST");
      return path.join(sourcePath, this.name.replace(/\./ig, "/")) + ".java";
    }
  }));
};
